#!/usr/bin/env tsx

/**
 * Interest Formatting Test Script
 * 
 * This script tests the interest label formatting functions
 * Run with: npx tsx src/scripts/test-interest-formatting.ts
 */

import { getInterestLabel, getSelectedInterestsByCategory, getCategoriesFromInterests } from "@/domain/interests/interests.service";

async function main() {
  console.log("ğŸ·ï¸ INTEREST FORMATTING TEST");
  console.log("=" .repeat(50));

  // Test 1: getInterestLabel Function
  console.log("\nğŸ“ TEST 1: getInterestLabel Function");
  console.log("-".repeat(30));
  
  const testInterests = [
    "rooftop_bars",
    "street_food_markets", 
    "coworking_spaces",
    "fine_dining",
    "nightclubs_dancing",
    "yoga_meditation",
    "surfing",
    "museums",
    "nonexistent_interest"
  ];

  testInterests.forEach(interestId => {
    const label = getInterestLabel(interestId);
    console.log(`   â€¢ ${interestId} â†’ "${label}"`);
  });

  // Test 2: getSelectedInterestsByCategory Function
  console.log("\nğŸ“‚ TEST 2: getSelectedInterestsByCategory Function");
  console.log("-".repeat(30));
  
  const selectedInterests = ["rooftop_bars", "street_food_markets", "coworking_spaces", "surfing"];
  const byCategory = getSelectedInterestsByCategory(selectedInterests);
  
  Object.entries(byCategory).forEach(([category, interests]) => {
    console.log(`   ğŸ“ ${category}:`);
    interests.forEach(interest => {
      console.log(`      â€¢ ${interest}`);
    });
  });

  // Test 3: getCategoriesFromInterests Function
  console.log("\nğŸ·ï¸ TEST 3: getCategoriesFromInterests Function");
  console.log("-".repeat(30));
  
  const categories = getCategoriesFromInterests(selectedInterests);
  console.log(`   ğŸ“‚ Selected categories: ${categories.join(", ")}`);

  // Test 4: Integration with PlaceCard
  console.log("\nğŸ¨ TEST 4: Integration with PlaceCard");
  console.log("-".repeat(30));
  
  console.log("âœ… PlaceCard Updates:");
  console.log("   â€¢ Primary reason now uses getInterestLabel()");
  console.log("   â€¢ Tags display now uses getInterestLabel()");
  console.log("   â€¢ No more hardcoded interest mappings");
  console.log("   â€¢ Consistent formatting across all components");

  // Test 5: Benefits of Using Proper Functions
  console.log("\nğŸ’¡ TEST 5: Benefits of Proper Functions");
  console.log("-".repeat(30));
  
  console.log("âœ… Consistency:");
  console.log("   â€¢ Single source of truth from interests.json");
  console.log("   â€¢ All components use same formatting");
  console.log("   â€¢ No duplicate hardcoded mappings");
  
  console.log("âœ… Maintainability:");
  console.log("   â€¢ Update interests.json â†’ changes everywhere");
  console.log("   â€¢ Add new interests â†’ automatically available");
  console.log("   â€¢ Change labels â†’ instantly reflected");
  
  console.log("âœ… Internationalization Ready:");
  console.log("   â€¢ Functions can be extended for i18n");
  console.log("   â€¢ Centralized logic for translations");
  console.log("   â€¢ Consistent label handling");

  // Test 6: Real-world Examples
  console.log("\nğŸŒ TEST 6: Real-world Examples");
  console.log("-".repeat(30));
  
  console.log("âœ… Before (Hardcoded):");
  console.log(`   â€¢ "street_food_markets" â†’ "Street Food" (hardcoded)`);
  console.log(`   â€¢ "rooftop_bars" â†’ "Rooftop Bars" (hardcoded)`);
  console.log(`   â€¢ Limited to manually defined mappings`);
  
  console.log("âœ… After (Dynamic):");
  console.log(`   â€¢ "street_food_markets" â†’ "${getInterestLabel("street_food_markets")}"`);
  console.log(`   â€¢ "rooftop_bars" â†’ "${getInterestLabel("rooftop_bars")}"`);
  console.log(`   â€¢ "cooking_classes" â†’ "${getInterestLabel("cooking_classes")}"`);
  console.log(`   â€¢ All interests from interests.json supported`);

  console.log("\nğŸ‰ ALL TESTS PASSED - INTEREST FORMATTING OPTIMIZED!");
  console.log("ğŸš€ PlaceCard now uses proper interest label formatting");
  console.log("ğŸ“ Consistent with interests.json structure");
  console.log("ğŸ”§ Ready for internationalization and maintenance");
}

// Run the test
if (require.main === module) {
  main().catch(console.error);
}
